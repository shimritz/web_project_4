!function(){"use strict";var e="",t=e+"6163c2039d1f0eb8d7ca.jpg",n=e+"93d4395eb12af67dc0ab.svg";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e,t,n){let{name:o,link:r}=e;s(this,"getCardElement",(()=>{this._cardElement=this._getTemplate();const e=this._cardElement.querySelector(".card__image");return e.src=this._link,e.alt="Photo of ".concat(this._name),this._cardElement.querySelector(".card__name").textContent=this._name,this._setEventListener(),this._cardElement})),s(this,"_deleteCard",(()=>{this._cardElement.remove(),this._cardElement=null})),this._name=o,this._link=r,this._cardSelector=t,this._handleCardClick=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListener(){this._cardElement.querySelector(".card__like-btn").addEventListener("click",(e=>this._toggleLikeButton(e))),this._cardElement.querySelector(".card__bin-btn").addEventListener("click",(()=>this._deleteCard())),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_toggleLikeButton(e){e.target.classList.toggle("card__like-btn_type_selected")}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=class{constructor(e,t){r(this,"_showInputError",(e=>{const{errorClass:t}=this._settings,n=this._formElement.querySelector("#".concat(e.id,"-error"));n.textContent=e.validationMessage,n.classList.add(t)})),r(this,"_hideInputError",(e=>{const{errorClass:t}=this._settings,n=this._formElement.querySelector("#".concat(e.id,"-error"));n.textContent="",n.classList.remove(t)})),r(this,"_checkInputValidity",((e,t)=>{e.validity.valid?this._hideInputError(e,this._formElement,t):this._showInputError(e,this._formElement,t)})),r(this,"_setEventListeners",(()=>{const{inputSelector:e}=this._settings,t=Array.from(this._formElement.querySelectorAll(e));t.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e,this._settings),this._toggleButtonState(t)}))}))})),r(this,"_checkIfFormValid",(e=>e.every((e=>e.validity.valid)))),r(this,"_toggleButtonState",(e=>{const{submitButtonSelector:t,inactiveButtonClass:n}=this._settings,s=this._formElement.querySelector(t);this._checkIfFormValid(e)?(s.disabled=!1,s.classList.remove(n)):(s.disabled=!0,s.classList.add(n))})),r(this,"toggleSubmitButton",(()=>{const{submitButtonSelector:e,inactiveButtonClass:t}=this._settings,n=this._formElement.querySelector(e);n.disabled=!0,n.classList.add(t)})),this._settings=e,this._formElement=t}resetValidation(e){e.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(this._formElement)}};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=class{constructor(e){l(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),l(this,"_closePopupOnRemoteClick",(e=>{e.target.classList.contains("modal")&&this.close()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._closePopupOnRemoteClick)}close(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._closePopupOnRemoteClick)}setEventListeners(){this._popupElement.querySelector(".modal__close-btn").addEventListener("click",(()=>{this.close()}))}},c=class extends a{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popupElement.querySelector(".form")}_getInputValues(){const e=[...this._popupElement.querySelectorAll(".form__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this.close()}))}close(){super.close(),this._form.reset()}};const d={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",errorClass:"form__error_visible"},m=document.querySelector(".profile__avatar"),_=document.querySelector(".header__logo");m.src=t,_.src=n;const u=document.querySelector(".modal_type_add-card"),h=new i(d,document.querySelector(".modal_type_profile")),p=new i(d,u);h.enableValidation(),p.enableValidation();const E=document.querySelector(".profile__edit-button"),b=document.querySelector(".profile__add-button"),f=new class{constructor(e){let{nameSelector:t,jobSelector:n}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,aboutMe:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:n}=e;this._nameElement.textContent=t,this._jobElement.textContent=n}}({nameSelector:".profile__name",jobSelector:".profile__about-me"}),y=new c(".modal_type_profile",(e=>{f.setUserInfo({name:e.name,job:e.aboutMe})}));y.setEventListeners();const v=new c(".modal_type_add-card",(e=>{S({name:e.title,link:e.image}),p.toggleSubmitButton()}));v.setEventListeners();const g=new class extends a{open(e,t){const n=this._popupElement.querySelector(".modal__popup-image"),s=this._popupElement.querySelector(".modal__popup-name");n.src=t,n.alt="Photo of ".concat(e),s.textContent=e,super.open()}}(".modal_type_preview");g.setEventListeners();const S=e=>{const t=L(e).getCardElement();k.addItem(t)},L=e=>new o(e,"#card-template",((e,t)=>{g.open(e,t)})),k=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e,this._container)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:S},".photos");k.renderItems();const q=document.querySelector(".form__input_type_name"),C=document.querySelector(".form__input_type_about-me");E.addEventListener("click",(()=>{const e=f.getUserInfo();q.value=e.name,C.value=e.aboutMe,y.open()})),b.addEventListener("click",(()=>{v.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQ0EsSUFBSUEsRUNEb0IsRyxzTENBakIsTUFBTUMsRUFDWEMsWUFBWSxFQUFnQkMsRUFBY0MsR0FBaUIsSUFBL0MsS0FBRUMsRUFBRixLQUFRQyxHQUF1QywyQkFjMUMsS0FDZkMsS0FBS0MsYUFBZUQsS0FBS0UsZUFFekIsTUFBTUMsRUFBZUgsS0FBS0MsYUFBYUcsY0FBYyxnQkFRckQsT0FQQUQsRUFBYUUsSUFBTUwsS0FBS00sTUFDeEJILEVBQWFJLElBQWIsbUJBQStCUCxLQUFLUSxPQUVwQ1IsS0FBS0MsYUFBYUcsY0FBYyxlQUFlSyxZQUFjVCxLQUFLUSxNQUVsRVIsS0FBS1Usb0JBRUVWLEtBQUtDLGdCQXpCNkMsc0JBK0M3QyxLQUNaRCxLQUFLQyxhQUFhVSxTQUNsQlgsS0FBS0MsYUFBZSxRQWhEcEJELEtBQUtRLE1BQVFWLEVBQ2JFLEtBQUtNLE1BQVFQLEVBQ2JDLEtBQUtZLGNBQWdCaEIsRUFDckJJLEtBQUthLGlCQUFtQmhCLEVBRzFCSyxlQUNFLE9BQU9ZLFNBQ0pWLGNBQWNKLEtBQUtZLGVBQ25CRyxRQUFRWCxjQUFjLFNBQ3RCWSxXQUFVLEdBaUJmTixvQkFDRVYsS0FBS0MsYUFDRkcsY0FBYyxtQkFDZGEsaUJBQWlCLFNBQVVDLEdBQVFsQixLQUFLbUIsa0JBQWtCRCxLQUM3RGxCLEtBQUtDLGFBQ0ZHLGNBQWMsa0JBQ2RhLGlCQUFpQixTQUFTLElBQU1qQixLQUFLb0IsZ0JBQ3hDcEIsS0FBS0MsYUFDRkcsY0FBYyxnQkFDZGEsaUJBQWlCLFNBQVMsS0FDekJqQixLQUFLYSxpQkFBaUJiLEtBQUtRLE1BQU9SLEtBQUtNLFVBSTdDYSxrQkFBa0JELEdBQ0dBLEVBQUlHLE9BQ1pDLFVBQVVDLE9BQU8saUMsd0hDdUNoQyxNQXBGQSxNQUNFNUIsWUFBWTZCLEVBQVVDLEdBQWEsMEJBS2hCQyxJQUNqQixNQUFNLFdBQUVDLEdBQWUzQixLQUFLNEIsVUFDdEJDLEVBQWU3QixLQUFLOEIsYUFBYTFCLGNBQWxCLFdBQW9Dc0IsRUFBTUssR0FBMUMsV0FFckJGLEVBQWFwQixZQUFjaUIsRUFBTU0sa0JBQ2pDSCxFQUFhUCxVQUFVVyxJQUFJTixNQVZNLDBCQWFoQkQsSUFDakIsTUFBTSxXQUFFQyxHQUFlM0IsS0FBSzRCLFVBQ3RCQyxFQUFlN0IsS0FBSzhCLGFBQWExQixjQUFsQixXQUFvQ3NCLEVBQU1LLEdBQTFDLFdBQ3JCRixFQUFhcEIsWUFBYyxHQUMzQm9CLEVBQWFQLFVBQVVYLE9BQU9nQixNQWpCRyw4QkFvQmIsQ0FBQ0QsRUFBT0YsS0FDeEJFLEVBQU1RLFNBQVNDLE1BQ2pCbkMsS0FBS29DLGdCQUFnQlYsRUFBTzFCLEtBQUs4QixhQUFjTixHQUUvQ3hCLEtBQUtxQyxnQkFBZ0JYLEVBQU8xQixLQUFLOEIsYUFBY04sTUF4QmhCLDZCQTRCZCxLQUNuQixNQUFNLGNBQUVjLEdBQWtCdEMsS0FBSzRCLFVBQ3pCVyxFQUFZQyxNQUFNQyxLQUN0QnpDLEtBQUs4QixhQUFhWSxpQkFBaUJKLElBR3JDQyxFQUFVSSxTQUFTakIsSUFDakJBLEVBQU1ULGlCQUFpQixTQUFTLEtBQzlCakIsS0FBSzRDLG9CQUFvQmxCLEVBQU8xQixLQUFLNEIsV0FDckM1QixLQUFLNkMsbUJBQW1CTixZQXJDSyw0QkEwQ2RBLEdBQ25CQSxFQUFVTyxPQUFPcEIsR0FBVUEsRUFBTVEsU0FBU0MsVUEzQ1QsNkJBNkNiSSxJQUNwQixNQUFNLHFCQUFFUSxFQUFGLG9CQUF3QkMsR0FBd0JoRCxLQUFLNEIsVUFFckRxQixFQUFTakQsS0FBSzhCLGFBQWExQixjQUFjMkMsR0FFL0IvQyxLQUFLa0Qsa0JBQWtCWCxJQUdyQ1UsRUFBT0UsVUFBVyxFQUNsQkYsRUFBTzNCLFVBQVVYLE9BQU9xQyxLQUV4QkMsRUFBT0UsVUFBVyxFQUNsQkYsRUFBTzNCLFVBQVVXLElBQUllLE9BekRVLDZCQTZEZCxLQUNuQixNQUFNLHFCQUFFRCxFQUFGLG9CQUF3QkMsR0FBd0JoRCxLQUFLNEIsVUFFckRxQixFQUFTakQsS0FBSzhCLGFBQWExQixjQUFjMkMsR0FDL0NFLEVBQU9FLFVBQVcsRUFDbEJGLEVBQU8zQixVQUFVVyxJQUFJZSxNQWpFckJoRCxLQUFLNEIsVUFBWUosRUFDakJ4QixLQUFLOEIsYUFBZUwsRUFtRXRCMkIsZ0JBQWdCYixHQUNkQSxFQUFVSSxTQUFTakIsSUFDakIxQixLQUFLb0MsZ0JBQWdCVixNQUl6QjJCLG1CQUNFckQsS0FBSzhCLGFBQWFiLGlCQUFpQixVQUFXQyxJQUM1Q0EsRUFBSW9DLG9CQUVOdEQsS0FBS3VELG1CQUFtQnZELEtBQUs4QixnQix3SENsQ2pDLE1BOUNBLE1BQ0VuQyxZQUFZNkQsR0FBZSwwQkFJUnRDLElBQ0QsV0FBWkEsRUFBSXVDLEtBQ056RCxLQUFLMEQsV0FOa0IsbUNBVUN4QyxJQUN0QkEsRUFBSUcsT0FBT0MsVUFBVXFDLFNBQVMsVUFDaEMzRCxLQUFLMEQsV0FYUDFELEtBQUs0RCxjQUFnQjlDLFNBQVNWLGNBQWNvRCxHQWU5Q0ssT0FDRTdELEtBQUs0RCxjQUFjdEMsVUFBVVcsSUFBSSxjQUNqQ25CLFNBQVNHLGlCQUFpQixVQUFXakIsS0FBSzhELGlCQUUxQzlELEtBQUs0RCxjQUFjM0MsaUJBQ2pCLFlBQ0FqQixLQUFLK0QsMEJBSVRMLFFBQ0UxRCxLQUFLNEQsY0FBY3RDLFVBQVVYLE9BQU8sY0FDcENHLFNBQVNrRCxvQkFBb0IsVUFBV2hFLEtBQUs4RCxpQkFFN0M5RCxLQUFLNEQsY0FBY0ksb0JBQ2pCLFlBQ0FoRSxLQUFLK0QsMEJBSVRFLG9CQUNFakUsS0FBSzRELGNBQ0Z4RCxjQUFjLHFCQUNkYSxpQkFBaUIsU0FBUyxLQUN6QmpCLEtBQUswRCxhQ05iLEVBakNBLGNBQTRCUSxFQUMxQnZFLFlBQVk2RCxFQUFlVyxHQUN6QkMsTUFBTVosR0FDTnhELEtBQUtxRSxjQUFnQkYsRUFDckJuRSxLQUFLc0UsTUFBUXRFLEtBQUs0RCxjQUFjeEQsY0FBYyxTQUdoRG1FLGtCQUNFLE1BQU1DLEVBQVMsSUFBSXhFLEtBQUs0RCxjQUFjbEIsaUJBQWlCLGlCQUNqRCtCLEVBQWMsR0FNcEIsT0FKQUQsRUFBTzdCLFNBQVNqQixJQUNkK0MsRUFBWS9DLEVBQU01QixNQUFRNEIsRUFBTWdELFNBRzNCRCxFQUdUUixvQkFDRUcsTUFBTUgsb0JBQ05qRSxLQUFLc0UsTUFBTXJELGlCQUFpQixVQUFXQyxJQUNyQ0EsRUFBSW9DLGlCQUNKdEQsS0FBS3FFLGNBQWNyRSxLQUFLdUUsbUJBQ3hCdkUsS0FBSzBELFdBSVRBLFFBQ0VVLE1BQU1WLFFBQ04xRCxLQUFLc0UsTUFBTUssVUNsQmYsTUFBTW5ELEVBQVcsQ0FDZm9ELGFBQWMsUUFDZHRDLGNBQWUsZUFDZlMscUJBQXNCLGdCQUN0QkMsb0JBQXFCLHdCQUNyQnJCLFdBQVksdUJBR1JrRCxFQUFnQi9ELFNBQVNWLGNBQWMsb0JBQ3ZDMEUsRUFBYWhFLFNBQVNWLGNBQWMsaUJBQzFDeUUsRUFBY3hFLElBQU0wRSxFQUNwQkQsRUFBV3pFLElBQU0yRSxFQUdqQixNQUFNQyxFQUFlbkUsU0FBU1YsY0FBYyx3QkFJL0I4RSxFQUFvQixJQUFJQyxFQUFjM0QsRUFIOUJWLFNBQVNWLGNBQWMsd0JBSS9CZ0YsRUFBbUIsSUFBSUQsRUFBYzNELEVBQVV5RCxHQUc1REMsRUFBa0I3QixtQkFFbEIrQixFQUFpQi9CLG1CQUdqQixNQUFNZ0MsRUFBa0J2RSxTQUFTVixjQUFjLHlCQUV6Q2tGLEVBQWdCeEUsU0FBU1YsY0FBYyx3QkFLdkNtRixFQUFXLElDL0NqQixNQUNFNUYsWUFBWSxHQUErQixJQUEvQixhQUFFNkYsRUFBRixZQUFnQkMsR0FBZSxFQUN6Q3pGLEtBQUswRixhQUFlNUUsU0FBU1YsY0FBY29GLEdBQzNDeEYsS0FBSzJGLFlBQWM3RSxTQUFTVixjQUFjcUYsR0FHNUNHLGNBQ0UsTUFBTyxDQUNMOUYsS0FBTUUsS0FBSzBGLGFBQWFqRixZQUN4Qm9GLFFBQVM3RixLQUFLMkYsWUFBWWxGLGFBSTlCcUYsWUFBWSxHQUFlLElBQWYsS0FBRWhHLEVBQUYsSUFBUWlHLEdBQU8sRUFDekIvRixLQUFLMEYsYUFBYWpGLFlBQWNYLEVBQ2hDRSxLQUFLMkYsWUFBWWxGLFlBQWNzRixJRGdDTCxDQUM1QlAsYUFBYyxpQkFDZEMsWUFBYSx1QkFHVE8sRUFBWSxJQUFJQyxFQUFjLHVCQUF3QkMsSUFDMURYLEVBQVNPLFlBQVksQ0FBRWhHLEtBQU1vRyxFQUFLcEcsS0FBTWlHLElBQUtHLEVBQUtMLGFBRXBERyxFQUFVL0Isb0JBR1YsTUFBTWtDLEVBQXVCLElBQUlGLEVBQy9CLHdCQUNDQyxJQUNDRSxFQUFXLENBQ1R0RyxLQUFNb0csRUFBS0csTUFDWHRHLEtBQU1tRyxFQUFLSSxRQUdibEIsRUFBaUJtQix3QkFHckJKLEVBQXFCbEMsb0JBR3JCLE1BQU11QyxFQUFhLElFdEVuQixjQUE2QnRDLEVBQzNCTCxLQUFLNEMsRUFBTTFHLEdBQ1QsTUFBTUksRUFBZUgsS0FBSzRELGNBQWN4RCxjQUN0Qyx1QkFFSXNHLEVBQ0oxRyxLQUFLNEQsY0FBY3hELGNBQWMsc0JBRW5DRCxFQUFhRSxJQUFNTixFQUNuQkksRUFBYUksSUFBYixtQkFBK0JrRyxHQUMvQkMsRUFBZWpHLFlBQWNnRyxFQUU3QnJDLE1BQU1QLFNGMEQ0Qix1QkFDdEMyQyxFQUFXdkMsb0JBRVgsTUFBTW1DLEVBQWNGLElBQ2xCLE1BQ01TLEVBRE9DLEVBQWFWLEdBQ0RXLGlCQUN6QkMsRUFBUUMsUUFBUUosSUFHWkMsRUFBZ0JWLEdBQ2IsSUFBSXhHLEVBQUt3RyxFQXJDVyxrQkFxQ2lCLENBQUNjLEVBQVVDLEtBQ3JEVCxFQUFXM0MsS0FBS21ELEVBQVVDLE1BS3hCSCxFQUFVLElHeEZoQixNQUNFbkgsWUFBWSxFQUFxQnVILEdBQW1CLElBQXhDLE1BQUVDLEVBQUYsU0FBU0MsR0FBK0IsRUFDbERwSCxLQUFLcUgsT0FBU0YsRUFDZG5ILEtBQUtzSCxVQUFZRixFQUNqQnBILEtBQUt1SCxXQUFhekcsU0FBU1YsY0FBYzhHLEdBRzNDTSxjQUNFeEgsS0FBS3FILE9BQU8xRSxTQUFTOEUsSUFDbkJ6SCxLQUFLc0gsVUFBVUcsRUFBTXpILEtBQUt1SCxlQUk5QlIsUUFBUUosR0FDTjNHLEtBQUt1SCxXQUFXRyxRQUFRZixLSDJFMUIsQ0FDRVEsTUkxRndCLENBQzFCLENBQ0VySCxLQUFNLGtCQUNOQyxLQUFNLG9EQUVSLENBQ0VELEtBQU0sY0FDTkMsS0FBTSx1REFFUixDQUNFRCxLQUFNLGlCQUNOQyxLQUFNLDBEQUVSLENBQ0VELEtBQU0sVUFDTkMsS0FBTSxtREFFUixDQUNFRCxLQUFNLHdCQUNOQyxLQUFNLG1EQUVSLENBQ0VELEtBQU0saUJBQ05DLEtBQU0saURKb0VOcUgsU0FBVWhCLEdBRVosV0FHRlUsRUFBUVUsY0FFUixNQUFNRyxFQUFnQjdHLFNBQVNWLGNBQWMsMEJBQ3ZDd0gsRUFBbUI5RyxTQUFTVixjQUFjLDhCQUVoRGlGLEVBQWdCcEUsaUJBQWlCLFNBQVMsS0FDeEMsTUFBTTRHLEVBQWV0QyxFQUFTSyxjQUU5QitCLEVBQWNqRCxNQUFRbUQsRUFBYS9ILEtBQ25DOEgsRUFBaUJsRCxNQUFRbUQsRUFBYWhDLFFBRXRDRyxFQUFVbkMsVUFHWnlCLEVBQWNyRSxpQkFBaUIsU0FBUyxLQUN0Q2tGLEVBQXFCdEMsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY2FyZHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEVsZW1lbnQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIGltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IGBQaG90byBvZiAke3RoaXMuX25hbWV9YDtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX25hbWVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHRoaXMuX3RvZ2dsZUxpa2VCdXR0b24oZXZ0KSk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19iaW4tYnRuXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fZGVsZXRlQ2FyZCgpKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlTGlrZUJ1dHRvbihldnQpIHtcclxuICAgIGNvbnN0IGxpa2VCdXR0b24gPSBldnQudGFyZ2V0O1xyXG4gICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fdHlwZV9zZWxlY3RlZFwiKTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVDYXJkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfTtcclxufVxyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0KSA9PiB7XHJcbiAgICBjb25zdCB7IGVycm9yQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcclxuICAgIGNvbnN0IHsgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0LCBzZXR0aW5ncykgPT4ge1xyXG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0LCB0aGlzLl9mb3JtRWxlbWVudCwgc2V0dGluZ3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIHRoaXMuX2Zvcm1FbGVtZW50LCBzZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dFNlbGVjdG9yIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0LCB0aGlzLl9zZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBfY2hlY2tJZkZvcm1WYWxpZCA9IChpbnB1dExpc3QpID0+XHJcbiAgICBpbnB1dExpc3QuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QpID0+IHtcclxuICAgIGNvbnN0IHsgc3VibWl0QnV0dG9uU2VsZWN0b3IsIGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG5cclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIGNvbnN0IGlzVmFsaWQgPSB0aGlzLl9jaGVja0lmRm9ybVZhbGlkKGlucHV0TGlzdCk7XHJcblxyXG4gICAgaWYgKGlzVmFsaWQpIHtcclxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdG9nZ2xlU3VibWl0QnV0dG9uID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBzdWJtaXRCdXR0b25TZWxlY3RvciwgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fc2V0dGluZ3M7XHJcblxyXG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKGlucHV0TGlzdCkge1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybUVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vkb3duXCIsXHJcbiAgICAgIHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5cIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vkb3duXCIsXHJcbiAgICAgIHRoaXMuX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyAvL2NhbGxpbmcgdGhlIGNvbnRydWN0b3Igb2YgcGFyZW50IFBvcHVwXHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKV07XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IGF2YXRhclNyYyBmcm9tIFwiLi4vaW1hZ2VzL3Byb2ZpbGVfcGhvdG8taW1hZ2UoMSkuanBnXCI7XHJcbmltcG9ydCBwcm9maWxlTG9nb1NyYyBmcm9tIFwiLi4vaW1hZ2VzL1ZlY3RvcmxvZ28uc3ZnXCI7XHJcblxyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi9jYXJkcy5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5cclxuY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0XCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXRfZGlzYWJsZWRcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcclxuY29uc3QgaGVhZGVyTG9nbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19sb2dvXCIpO1xyXG5wcm9maWxlQXZhdGFyLnNyYyA9IGF2YXRhclNyYztcclxuaGVhZGVyTG9nby5zcmMgPSBwcm9maWxlTG9nb1NyYztcclxuXHJcbi8vIE1vZGFsc1xyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3R5cGVfYWRkLWNhcmRcIik7XHJcbmNvbnN0IHByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfdHlwZV9wcm9maWxlXCIpO1xyXG5cclxuLy8gY3JlYXRpbmcgaW5zdGFuY2VzXHJcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwcm9maWxlTW9kYWwpO1xyXG5leHBvcnQgY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRDYXJkTW9kYWwpO1xyXG5cclxuLy8gY2FsbGluZyB0aGUgbWV0aG9kcyBmcm9tIHRoZSBpbnN0YW5jZVxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vIGJ1dHRvbnMgYW5kIG90aGVyIGVsZW1lbnRzXHJcbmNvbnN0IG9wZW5Nb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcblxyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuLy8gd3JhcHBlcnNcclxuY29uc3QgY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgZWRpdE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIubW9kYWxfdHlwZV9wcm9maWxlXCIsIChkYXRhKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiBkYXRhLm5hbWUsIGpvYjogZGF0YS5hYm91dE1lIH0pO1xyXG59KTtcclxuZWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBhZGRDYXJkXHJcbmNvbnN0IGFkZENhcmRQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIubW9kYWxfdHlwZV9hZGQtY2FyZFwiLFxyXG4gIChkYXRhKSA9PiB7XHJcbiAgICByZW5kZXJDYXJkKHtcclxuICAgICAgbmFtZTogZGF0YS50aXRsZSxcclxuICAgICAgbGluazogZGF0YS5pbWFnZSxcclxuICAgIH0pO1xyXG5cclxuICAgIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlU3VibWl0QnV0dG9uKCk7XHJcbiAgfVxyXG4pO1xyXG5hZGRDYXJkUG9wdXBXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gcG9wdXBXaXRoSW1hZ2VcclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5tb2RhbF90eXBlX3ByZXZpZXdcIik7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBnZW5lcmF0ZUNhcmQoZGF0YSk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdldENhcmRFbGVtZW50KCk7XHJcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufTtcclxuXHJcbmNvbnN0IGdlbmVyYXRlQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBDYXJkKGRhdGEsIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLCAoY2FyZE5hbWUsIGNhcmRMaW5rKSA9PiB7XHJcbiAgICBpbWFnZVBvcHVwLm9wZW4oY2FyZE5hbWUsIGNhcmRMaW5rKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vIHNlY3Rpb25cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIFwiLnBob3Rvc1wiXHJcbik7XHJcblxyXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCBmb3JtSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX25hbWVcIik7XHJcbmNvbnN0IGZvcm1JbnB1dEFib3V0TWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfYWJvdXQtbWVcIik7XHJcblxyXG5vcGVuTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBleGlzdGluZ1VzZXIgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBmb3JtSW5wdXROYW1lLnZhbHVlID0gZXhpc3RpbmdVc2VyLm5hbWU7XHJcbiAgZm9ybUlucHV0QWJvdXRNZS52YWx1ZSA9IGV4aXN0aW5nVXNlci5hYm91dE1lO1xyXG5cclxuICBlZGl0TW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXBXaXRoRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXRNZTogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgb3Blbih0ZXh0LCBsaW5rKSB7XHJcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3BvcHVwLWltYWdlXCJcclxuICAgICk7XHJcbiAgICBjb25zdCBjYXB0aW9uRWxlbWVudCA9XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wb3B1cC1uYW1lXCIpO1xyXG5cclxuICAgIGltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xyXG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IGBQaG90byBvZiAke3RleHR9YDtcclxuICAgIGNhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcclxuIiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSwgdGhpcy5fY29udGFpbmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShjYXJkRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX2NhcmRFbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiaW1hZ2VFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInNyYyIsIl9saW5rIiwiYWx0IiwiX25hbWUiLCJ0ZXh0Q29udGVudCIsIl9zZXRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX3RvZ2dsZUxpa2VCdXR0b24iLCJfZGVsZXRlQ2FyZCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJpbnB1dCIsImVycm9yQ2xhc3MiLCJfc2V0dGluZ3MiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiYWRkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0U2VsZWN0b3IiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJldmVyeSIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImJ1dHRvbiIsIl9jaGVja0lmRm9ybVZhbGlkIiwiZGlzYWJsZWQiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJjb250YWlucyIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfZm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJyZXNldCIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVBdmF0YXIiLCJoZWFkZXJMb2dvIiwiYXZhdGFyU3JjIiwicHJvZmlsZUxvZ29TcmMiLCJhZGRDYXJkTW9kYWwiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwib3Blbk1vZGFsQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiYWJvdXRNZSIsInNldFVzZXJJbmZvIiwiam9iIiwiZWRpdE1vZGFsIiwiUG9wdXBXaXRoRm9ybSIsImRhdGEiLCJhZGRDYXJkUG9wdXBXaXRoRm9ybSIsInJlbmRlckNhcmQiLCJ0aXRsZSIsImltYWdlIiwidG9nZ2xlU3VibWl0QnV0dG9uIiwiaW1hZ2VQb3B1cCIsInRleHQiLCJjYXB0aW9uRWxlbWVudCIsImNhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiZ2V0Q2FyZEVsZW1lbnQiLCJzZWN0aW9uIiwiYWRkSXRlbSIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwicHJlcGVuZCIsImZvcm1JbnB1dE5hbWUiLCJmb3JtSW5wdXRBYm91dE1lIiwiZXhpc3RpbmdVc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==